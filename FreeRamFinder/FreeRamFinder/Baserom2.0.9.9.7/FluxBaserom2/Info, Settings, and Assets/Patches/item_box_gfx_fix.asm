; Item Box GFX Fix
;
; Author: Kenny3900
;
; "Fix the GFX garbage when the item reserve content is not mushroom, flower, star or feather."

if read1($00FFD5) == $23
	sa1rom
	!addr = $6000
	!long = $000000
else
	lorom
	!addr = $0000
	!long = $800000
endif

org $009095
autoclean JML Main

freedata	; this one doesn't change the data bank register, so it uses the RAM
			; mirrors from another bank, so I might as well toss it into banks 40+

Main:
LDY $01
LDA #$00
XBA
LDA $0DC2|!addr
REP #$30
ASL
TAX
LDA.l Table,x
STA $0202|!addr,y
LDA #$0F78			;X and Y position
STA $0200|!addr,y
SEP #$30
JML $0090C7|!long

Table:				; Format is XXYY: XX = YXPPCCCT, YY = tile number

dw $0000,$6824,$2A26,$2448,$240E,$6A24,$2AAE,$265C
dw $0000,$218A,$21E4,$28E8,$6024,$60EC,$2825,$21E4
dw $602A,$602A,$0000,$658C,$2060,$0000,$0000,$6BC2
dw $25C5,$25AB,$239D,$0000,$2B80,$2B81,$2B0A,$2B0A
dw $2B0A,$2B4B,$2B0A,$2B0A,$2B0A,$2B0A,$0000,$6580
dw $2746,$2240,$27A0,$23EA,$2382,$2BC8,$2D46,$6B40
dw $23A2,$21AA,$250A,$250C,$254A,$25A0,$0000,$6DA6
dw $678A,$A14A,$214A,$6D64,$23C8,$2FAA,$202E,$61E0
dw $6933,$236E,$252A,$A9AC,$2BE4,$6BE4,$66C0,$2BC4
dw $23CC,$6330,$6686,$6BAE,$61C7,$6385,$2240,$6BA2
dw $6D86,$2360,$23C2,$2D80,$6824,$282A,$0000,$0000
dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dw $0000,$0000,$0000,$0000,$0000,$6AC8,$68C8,$66E0
dw $64C8,$6A94,$6894,$6694,$6494,$6A92,$6A92,$2892
dw $2892,$6492,$23CC,$20EB,$64AA,$64A8,$6D80,$0000
dw $6982,$6980,$2567,$2569,$2488,$6567,$2242,$28AC
dw $618A,$62A6,$258E,$0000,$27A4,$2788,$24E8,$2B17
dw $2917,$6B17,$6917,$238E,$23A2,$23C0,$2900,$0000
dw $25DC,$0000,$0000,$698C,$2A2A,$6364,$63AA,$6364
dw $25AC,$654A,$2B02,$0000,$6F8C,$6D6A,$6DED,$27C4
dw $27C6,$27C8,$678C,$2642,$65E8,$63C2,$67E2,$6788
dw $27CE,$6380,$20E8,$2B0A,$2567,$6DC4,$2BA4,$6B8C
dw $6BEC,$2440,$6184,$2186,$28AE,$28AE,$29A7,$61EB
dw $2640,$0000,$23EA,$2385,$23EB,$2386,$2040,$2040
dw $2161,$21EB,$2BCB,$2BCC,$21A2,$2B00,$23E2,$2160
dw $0000,$21DE,$238E,$A38E,$236C,$25C8,$0000,$2060
dw $0000,$0000,$202E,$6FC0,$6FAA,$258A,$0000,$0000
